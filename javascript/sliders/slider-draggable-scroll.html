<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        scroll-behavior: smooth;
      }
      body{
        display: flex;
        justify-content: center;
        padding: 100px;
        background-image: url('../images/3.jpg');
        background-repeat: no-repeat;
        background-size: cover;
      }
      .wrapper{
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        width: 70vw;
        height: 80vh;
        padding: 50px;
        background-color: #fff3;
        backdrop-filter: blur(10px);
        border-radius: 10px;
        overflow: hidden;
      }
      .main-slider{
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 76%;
        margin-bottom: 10px;
        position: relative;
     }
     .slider{
        display: flex;
        width: auto;
        height: 100%;
     }
      #img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      .prev,
      .next {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 10px;
        cursor: pointer;
        border: none;
        color: #000;
        font-weight: bold;
        font-size: 1.4rem;
        user-select: none;
        background-color: #fff3;
        position: absolute;
      }
      .prev{
        left: 0;
        border-top-right-radius: 4px;
        border-bottom-right-radius: 4px;
      }
      .next{
       right: 0;
        border-top-left-radius: 4px;
        border-bottom-left-radius: 4px;
      }
      .hide{
        color: gray;
        cursor: not-allowed;
      }
      .sub-slider{
        display: flex;
        overflow: hidden;
      }
      .sub-container{
        min-width: calc(100% / 4);
        height: 100%;
        cursor: pointer;
        border: 1px solid transparent;
        user-select: none;
      }
      .sub-img{
        width: 100%;
        height: 100%;
        object-fit: cover;
        user-select: none;
      }
      .sub-slider.active {
        cursor: grab;
        scroll-behavior: auto;
      }
      .sub-style{
        border: 3px solid #f8a100;
      }
      @media only screen and (max-width: 1200px){
        body{
          padding: 0;
          width: 100vw;
          height: 100vh;
        }
        .wrapper{
          width: 100vw;
          height: 100vh;
        }
        .main-slider{
          height: 84vh;
        }
        .sub-slider{
          height: 16vh;
        }
        .sub-img{
          height: 100%;
        }
      }
    </style>
  </head>
  <body>
    <div class="wrapper">
      <div class="main-slider">
        <div class="slider" id="slider"></div>
        <button class="prev" id="prev">❮</button>
        <img src="../images/1.jpg" alt="" id="img"/>
        <button class="next" id="next">❯</button> 
      </div>
      <div class="sub-slider" id="sub-slider">
        <!-- sub images here in javascript -->
      </div>
    </div>

    <script>
       let images = [
        "../images/mirza0.webp",
        "../images/mirza1.webp",
        "../images/mirza2.webp",
        "../images/mirza3.webp",
        "../images/mirza4.webp",
        "../images/1.jpg",
        "../images/2.jpg",
        "../images/3.jpg",
        "../images/4.jpg",
      ];

      

      //load sub images
      images.forEach(item => {
        document.getElementById('sub-slider').innerHTML += `<div class="sub-container" draggable="false" ><img src="${item}" alt="" draggable="false" class="sub-img" /> </div>` 
      })
      document.querySelectorAll('.sub-img')[0].classList.add('sub-style')

      let prev = document.getElementById('prev')
      let next = document.getElementById('next')
      let imageIndex = 0;

       //on loading
      prev.setAttribute('disabled', 'disabled')
      prev.classList.add('hide')


      const setSlider = (img) => {
        next.addEventListener('click', () => {
         imageIndex++
          if (imageIndex >= img.length-1){
            next.setAttribute('disabled', 'disabled')
            next.classList.add('hide')
          }
          prev.removeAttribute('disabled')
          prev.classList.remove('hide')
          
          setImage(imageIndex)
          setSubimage(imageIndex)


          const subContainerWidth = document.querySelector('.sub-container').offsetWidth
          document.getElementById('sub-slider').scrollLeft += subContainerWidth
          
        })
        prev.addEventListener('click', () => {
          imageIndex--
          if (imageIndex == 0) {
            prev.setAttribute('disabled', 'disabled')
            prev.classList.add('hide')
          }
          next.removeAttribute('disabled')
          next.classList.remove('hide')
          setImage(imageIndex)
          setSubimage(imageIndex)

          const subContainerWidth = document.querySelector('.sub-container').offsetWidth
          document.getElementById('sub-slider').scrollLeft -= subContainerWidth
        })
  
        function setImage(index) {
          document.getElementById("img").src = img[index];
        };
        setImage(imageIndex);
      }
      setSlider(images)

      const setSubimage = (subIndex) => {
        //set sub style
        Array.from(document.querySelectorAll('.sub-img')).forEach((item, index) => {
          item.classList.remove('sub-style')
          if(index == subIndex){
            item.classList.add('sub-style')
          }
          
          //set main slider on sub images
          item.addEventListener('click', (e) => {
            document.querySelectorAll('.sub-img').forEach(item2 => {
              item2.classList.remove('sub-style')
              imageIndex = index
            })
            item.classList.add('sub-style')
            document.getElementById("img").src = item.getAttribute('src');
          })

        })

      }
      setSubimage(imageIndex)


      
      let isDown = false;
      let startX;
      let scrollLeft;
      const slider = document.getElementById('sub-slider');

      (() => {
        slider.addEventListener('mousedown', (e) => {
          isDown = true;
          slider.classList.add('active');
          startX = e.pageX;
          scrollLeft = slider.scrollLeft;
        });

        slider.addEventListener('mousemove', (e) => {
          if(!isDown) return;
          slider.scrollLeft = scrollLeft - (e.pageX - startX);
        });

        slider.addEventListener('mouseleave', (e) => {
          isDown = false;
          slider.classList.remove('active');
        });
        
        slider.addEventListener('mouseup', (e) => {
          isDown = false;
          slider.classList.remove('active');
        });
      })();

    </script>
  </body>
</html>