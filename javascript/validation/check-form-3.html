<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .container {
        width: 600px;
        margin: 50px auto;
      }
      .title {
        text-align: center;
      }
      form {
        display: flex;
        flex-direction: column;
        width: 100%;
      }
      form .reg_inp {
        margin: 5px 0;
        min-height: 30px;
        border: 1px solid #ccc;
        border-radius: 4px;
        padding-left: 5px;
      }
      form .info,
      .error {
        font-size: 12px;
        color: #ccc;
        padding-left: 10px;
      }
      form .error {
        color: red;
      }
      .gender label {
        cursor: pointer;
      }
      #aggre {
        margin: 20px 0;
        margin-left: 5px;
      }
      textarea {
        resize: vertical;
        margin: 10px 0;
        padding: 10px;
      }
      h3 {
        color: #999;
      }
      .children {
        display: none;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h2 class="title">Kayıt</h2>
      <form id="form">
        <!-- name -->
        <input
          class="reg_inp"
          type="text"
          name="name"
          title="Ad"
          placeholder="Ad"
          required
          minlength="2"
          maxlength="50"
        />
        <!-- lastname -->
        <input
          class="reg_inp"
          type="text"
          name="lastname"
          title="Soyad"
          placeholder="Soyad"
          required
          minlength="2"
          maxlength="50"
        />
        <!-- email -->
        <input
          class="reg_inp"
          type="email"
          name="email"
          title="Mail Adresi"
          placeholder="Mail Adresi"
          required
          minlength="10"
          maxlength="100"
        />
        <!-- password -->
        <input
          id="password"
          class="reg_inp"
          type="text"
          name="password"
          title="Şifre"
          placeholder="Şifre"
          required
          minlength="6"
          maxlength="100"
        />

        <!-- password_confirmation -->
        <input
          id="password_confirmation"
          class="reg_inp"
          type="text"
          name="password_confirmation"
          title="Şifre Tekrar"
          placeholder="Şifre Tekrar"
          required
          minlength="6"
          maxlength="50"
        />
        <span class="error" id="password_error"></span>

        <!-- phone -->
        <input
          class="reg_inp"
          type="text"
          placeholder="Telefon"
          title="Telefon"
          name="phone"
          required
          minlength="10"
          maxlength="10"
          pattern="[0-9]+"
          oninvalid="this.setCustomValidity('Telefon başında sıfır olmadan 10 haneli rakam olarak girilmelidir!')"
          oninput="setCustomValidity('')"
        />
        <span class="info"
          >Telefon başinda sıfır olmadan 10 haneli rakam olarak
          girilmelidir:Örnek 5552333332</span
        >

        <!-- birthday -->
        <h3>Dogum Tarihi</h3>
        <input
          class="reg_inp"
          id="birthdate"
          type="date"
          name="birthdate"
          placeholder="Doğum Tarihi"
          title="Doğum Tarihi"
          required
          min="1900-01-01"
          title="Dogum Tarihi"
        />
        <span class="error" id="birthdate_error"></span>
        <!-- salery -->
        <input
          class="reg_inp"
          id="salery"
          type="number"
          name="salery"
          placeholder="Maaş"
          title="Maaş"
          required
          min="0"
          max="30000"
        />
        <!-- age -->
        <input
          class="reg_inp"
          id="age"
          type="number"
          name="age"
          placeholder="Yas"
          title="Yas"
          required
          min="18"
          max="120"
        />

        <!-- gender -->
        <h3>Cinsiyeti</h3>
        <div class="gender">
          <label for="male"
            ><input type="radio" name="gender" id="male" required />
            Erkek</label
          >
          <label for="female">
            <input type="radio" name="gender" id="female" required />
            Kadın</label
          >
        </div>

        <!-- married -->
        <h3>Medeni Durumu</h3>
        <div class="gender">
          <label for="married"
            ><input type="radio" name="marital_status" id="married" required />
            Evli</label
          >
          <label for="single">
            <input type="radio" name="marital_status" id="single" required />
            Bekar</label
          >
        </div>
        <br />
        <!-- children -->
        <select name="children" id="children" class="reg_inp children" required>
          <option value="0">Yok</option>
          <option value="1">1</option>
          <option value="1">2</option>
          <option value="1">3</option>
          <option value="1">4</option>
          <option value="1">6</option>
          <option value="1">7</option>
        </select>
        <!-- lang -->
        <h3>Alacağı Dersler</h3>
        <div class="lang">
          <label for="html">
            <input type="checkbox" name="html" id="html" class="lang" />
            Html</label
          >
          <label for="javascript"
            ><input
              type="checkbox"
              name="javascript"
              id="javascript"
              class="lang"
            />
            Javascript</label
          >
          <label for="css"
            ><input type="checkbox" name="css" id="css" class="lang" />
            Css</label
          >
          <label for="nodejs"
            ><input type="checkbox" name="nodejs" id="nodejs" class="lang" />
            NodeJs</label
          >
          <label for="nuxt"
            ><input type="checkbox" name="nuxt" id="nuxt" class="lang" />
            Nuxt</label
          >
          <label for="svelte"
            ><input type="checkbox" name="svelte" id="svelte" class="lang" />
            Svelte</label
          >
        </div>
        <span class="error" id="lang_error"></span>

        <h3>Kurs Donemi</h3>
        <!-- started -->
        <span class="info"
          >Baslama Tarihi</span
        >
        <input
          class="reg_inp"
          id="start"
          type="date"
          name="start"
          placeholder="Start"
          title="Start"
          required
        />
        <span class="info"
          >Bitis Tarihi</span
        >
        <input
          class="reg_inp"
          id="finish"
          type="date"
          name="finish"
          placeholder="Finish"
          title="Finish"
          required
        />
        <span class="error" id="date_error"></span>
        <!-- address -->
        <textarea
          name="address"
          id="address"
          cols="30"
          rows="5"
          minlength="20"
          maxlength="255"
          placeholder="Adres"
          required
        ></textarea>

        <!-- declaretion -->
        <textarea
          name="declaretion"
          id="declaretion"
          cols="30"
          rows="10"
          minlength="30"
          maxlength="500"
          placeholder="Açıklama"
          required
        ></textarea>

        <!-- aggre -->
        <label for="aggre">
          <input type="checkbox" name="aggre" id="aggre" /> Okudum
        </label>
        <input type="submit" value="Kayit" id="submit" disabled />
      </form>
    </div>
    <script>
      const inp = (param) => document.getElementById(param)
      //aggre function
      inp("aggre").addEventListener("change", () => {
        if (inp("submit").disabled) {
          inp("submit").disabled = false;
        } else {
          inp("submit").disabled = true;
        }
      });

      //password function
      const checkPassword = (e) => {
        if (inp("password").value !== inp("password_confirmation").value) {
          e.preventDefault();
          inp("password_error").innerText = "Şifreler Uyuşmuyor!";
          inp("password_confirmation").focus();
        } else {
          inp("password_error").innerText = null;
        }
      };

      //lang function
      const checkLang = (e) => {
        let checkedLength = 0;
        document.querySelectorAll(".lang").forEach((item) => {
          item.checked ? checkedLength++ : 0;
        });

        if (checkedLength < 3) {
          e.preventDefault();
          inp("lang_error").innerText = "En az 3 dilin seçili olması gerekiyor!";
          inp("html").focus();
        } else {
          inp("lang_error").innerText = null;
        }
      };

      //married eventlistener
      inp("married").onchange = (e) =>
        e.target.checked
          ? inp("children").classList.remove("children")
          : null;
      inp("single").onchange = (e) =>
        e.target.checked
          ? inp("children").classList.add("children")
          : null;
      inp("finish").onchange = (e) => checkDate(e);

      //course function
      const checkDate = (e) => {
        if (inp("start").value > inp("finish").value) {
          e.preventDefault();
          inp("date_error").innerText = "Bitiş tarihi başlama tarihinden küçük olamaz!";
        } else {
          inp("date_error").innerText = "";
        }
      };

      //submit
      inp("form").onsubmit = (e) => {
        checkPassword(e);
        checkLang(e);
        checkDate(e);
        checkBirthDate(e)
      };

      //check birthdate
      checkBirthDate = (e) => {
        var today = new Date();
          var nowyear = today.getFullYear();
          var nowmonth = today.getMonth();
          var nowday = today.getDate();
          var birth = new Date(inp('birthdate').value);
  
          var birthyear = birth.getFullYear();
          var birthmonth = birth.getMonth();
          var birthday = birth.getDate();
  
          var age = nowyear - birthyear;
          var age_month = nowmonth - birthmonth;
          var age_day = nowday - birthday;
  
          inp("birthdate_error").innerText = ''
          if (age_month < 0 || (age_month == 0 && age_day < 0)) {
              age = parseInt(age) - 1;
          } 
          if ((age == 18 && age_month <= 0 && age_day <= 0) || age < 18) {
            e.preventDefault();
            inp("birthdate_error").innerText = "Yasiniz 18 ve uzeri olmali!"
            inp("birthdate").focus();
          }

          //or
          // e.preventDefault()
          // let age = ((today - birth.getTime()) / (1000*60*60*24*365)).toFixed(0)
          // console.log(age)
      }
    </script>
  </body>
</html>
