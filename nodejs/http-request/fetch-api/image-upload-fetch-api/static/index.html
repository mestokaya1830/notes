<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fetch Image Upload</title>
  <link rel="stylesheet" href="./main.css">
  <link rel="stylesheet" href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css' ,
    integrity='sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA==' ,
    crossorigin='anonymous' , referrerpolicy='no-referrer'">
</head>

<body>
  <div class=" wrapper">
  <h2 style="margin: 20px; text-align: center;">Fetch Image Upload</h2>
  <header>File Uploader</header>
  <form action="#" id="form" enctype='multipart/form-data'>
    <input type="file" name="file" id="file">
    <i class="fas fa-cloud-upload-alt"></i>
    <p>Brows file to upload</p>
  </form>
  <h3 id="status"></h3>
  </div>

  <script>
    const form = document.getElementById("form")
    document.getElementById("file").addEventListener("change", (e) => {
      if (e.target.files[0]) {
        uploadFile()
      }
    })

    const uploadFile = async () => {
      try {
        document.getElementById('status').innerText = 'Please wait...'
        const result = await fetch('/upload', {
          method: 'POST',
          body: new FormData(form)
        })
        document.getElementById('status').innerText = 'Upload completed'
        console.log(await result)//check here and handle response or error
      } catch (error) {
        console.log(error)
      }
    }

  </script>
  </body>

</html>